
---
layout: spec
title: Frictionless Data Patterns
listed: true
updated: 11 December 2017
created: 11 December 2017
ietf-keywords: true
author:
 - Paul Walsh (Open Knowledge International)
summary: A collection of patterns for frictionless handling of data.
ietf-keywords: true
---

[issues]: https://github.com/frictionlessdata/specs/issues
[repo]: https://github.com/frictionlessdata/specs

### Table of Contents
{:.no_toc}

* Will be replaced with the ToC, excluding the "Contents" header
{:toc}

# Private properties

## Overview

Some software that implements the Frictionless Data specifications may need to store additional information on the various Frictionless Data descriptors.

For example, a data registry that provides metatdata via `datapackage.json` may wish to set an internal version or identifier that is system-specific, and should not be considered as part of the user-generated metadata.

Properties to store such information should be considered "private", and by convention, the names should be prefixed by an underscore `_`.

## Implementations

There are no known implementations at present.

## Specification

On any Frictionless Data descriptor, data that is not generated by the author/contributors, but is generated by software/a system handling the data, `SHOULD` be considered as "private", and be prefixed by an underscore `_`.

To demonstrate, let's take the example of a data registry that implements `datapackage.json` for storing dataset metadata.

A user might upload a `datapackage.json` as follows:

```
{
  "name": "my-package",
  "resources": [
    {
      "name": "my-resource",
      "path": "my-resource.csv"
    }
  ]
}
```

The registry itself may have a platform-specific version system, and increment versions on each update of the data. To store this information on the datapackage itself, the platform could save this information in a "private" `_platformVersion` property as follows:

```
{
  "name": "my-package",
  "_platformVersion": 7
  "resources": [
    {
      "name": "my-resource",
      "path": "my-resource.csv"
    }
  ]
}
```

Usage of "private" properties ensures a clear distinction between data stored on the descriptor that is user (author/contributor) defined, and any additional data that may be stored by a 3rd party.

# Caching of resources

## Overview

All Frictionless Data specifications allow for referencing resources via http or a local filesystem.

In the case of remote resources via http, there is always the possibility that the remote server will be unavailable, or, that the resource itself will be temporarily or permanently removed.

Applications that are concerned with the persistent storage of data described in Frictionless Data specifications can use a `_cache` property that mirrors the functionality and usage of the `path` property, and refers to a sotrage location for the data that the application can fall back to if the canonical resource is unavailable.

## Implementations

There are no known implementations of this pattern at present.

## Specification

Implementations `MAY` handle a `_cache` property on any descriptor that supports a `path` property. In the case that the data referenced in `path` is unavailable, `_cache` should be used as a fallback to access the data. The handling of the data stored at `_cache` is beyond the scope of the specification. Implementations might store a copy of the resources in `path` at ingestion time, update at regular intervals, or any other method to keep an up-to-date, persistent copy.

Some examples of the `_cache` property.

```
{
  "name": "my-package",
  "resources": [
    {
      "name": "my-resource",
      "path": "http://example.com/data/csv/my-resource.csv",
      "_cache": "my-resource.csv"
    },
    {
      "name": "my-resource",
      "path": "http://example.com/data/csv/my-resource.csv",
      "_cache": "http://data.registry.com/user/files/my-resource.csv"
    },
    {
      "name": "my-resource",
      "path": [
        "http://example.com/data/csv/my-resource.csv",
        "http://somewhere-else.com/data/csv/resource2.csv"
      ]
      "_cache": [
        "my-resource.csv",
        "resource2.csv"
      ]
    },
    {
      "name": "my-resource",
      "path": "http://example.com/data/csv/my-resource.csv",
      "_cache": "my-resource.csv"
    }
  ]
}
```
